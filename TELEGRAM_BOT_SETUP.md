# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –û–ø–∏—Å–∞–Ω–∏–µ

Telegram –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –æ –∑–∞–¥–∞—á–∞—Ö:
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –∫–æ–≥–¥–∞ –∏–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞
- **–ê–¥–º–∏–Ω—ã/IT** –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –∫–æ–≥–¥–∞ –∏—Ö –∑–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∏–ª–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞

## –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ Telegram –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ [@BotFather](https://t.me/botfather)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –∏ —Å–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ **Bot Token** (–≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`)

## –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª `.env` –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```env
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
TELEGRAM_BOT_ENABLED=true
```

–ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
export TELEGRAM_BOT_TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞"
export TELEGRAM_BOT_ENABLED="true"
```

## –®–∞–≥ 3: –ü–æ–ª—É—á–µ–Ω–∏–µ Chat ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:
```bash
python telegram_bot.py
```

2. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞—á–Ω–∏—Ç–µ –¥–∏–∞–ª–æ–≥ —Å –≤–∞—à–∏–º –±–æ—Ç–æ–º
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start`
4. –°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç –≤–∞—à `chat_id` –≤ –∫–æ–Ω—Å–æ–ª–∏
5. –ë–æ—Ç —Ç–∞–∫–∂–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç –≤–∞–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å `chat_id`

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ API Telegram

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞—á–Ω–∏—Ç–µ –¥–∏–∞–ª–æ–≥ —Å –≤–∞—à–∏–º –±–æ—Ç–æ–º
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å:
```bash
curl https://api.telegram.org/bot<–í–ê–®_–¢–û–ö–ï–ù>/getUpdates
```

4. –ù–∞–π–¥–∏—Ç–µ `chat.id` –≤ –æ—Ç–≤–µ—Ç–µ (—ç—Ç–æ –∏ –µ—Å—Ç—å –≤–∞—à `chat_id`)

## –®–∞–≥ 4: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è `chat_id`, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ API:

```bash
POST /api/v1/telegram/register
Authorization: Bearer <–≤–∞—à_jwt_—Ç–æ–∫–µ–Ω>
Content-Type: application/json

{
  "telegram_chat_id": "123456789",
  "username": "username"  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

–û—Ç–≤–µ—Ç:
```json
{
  "success": true,
  "message": "Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã"
}
```

## –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

```bash
GET /api/v1/telegram/status
Authorization: Bearer <–≤–∞—à_jwt_—Ç–æ–∫–µ–Ω>
```

–û—Ç–≤–µ—Ç:
```json
{
  "registered": true,
  "chat_id": "123456789",
  "username": "username"
}
```

## –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

```bash
DELETE /api/v1/telegram/unregister
Authorization: Bearer <–≤–∞—à_jwt_—Ç–æ–∫–µ–Ω>
```

## –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 1. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ (`assigned_to`), –æ–Ω –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:

```
üìã –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞

–ó–∞–¥–∞—á–∞: –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
–û—Ç: –ò–º—è —Å–æ–∑–¥–∞—Ç–µ–ª—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à—É –¥–æ—Å–∫—É –∑–∞–¥–∞—á!
```

### 2. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤/IT)

–ö–æ–≥–¥–∞ –∑–∞–¥–∞—á–∞, —Å–æ–∑–¥–∞–Ω–Ω–∞—è –∞–¥–º–∏–Ω–æ–º/IT, –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å "done":

```
‚úÖ –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞

–ó–∞–¥–∞—á–∞: –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
–í—ã–ø–æ–ª–Ω–∏–ª: –ò–º—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è

–ó–∞–¥–∞—á–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞ –≤ —Å—Ç–∞—Ç—É—Å '–í—ã–ø–æ–ª–Ω–µ–Ω–æ'
```

### 3. –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤/IT)

–ö–æ–≥–¥–∞ –∑–∞–¥–∞—á–∞, —Å–æ–∑–¥–∞–Ω–Ω–∞—è –∞–¥–º–∏–Ω–æ–º/IT, –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ –¥—Ä—É–≥–æ–π —Å—Ç–∞—Ç—É—Å:

```
üîÑ –ó–∞–¥–∞—á–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞

–ó–∞–¥–∞—á–∞: –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
–û—Ç: –°—Ç–∞—Ä—ã–π —Å—Ç–∞—Ç—É—Å
–ö: –ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å
–ü–µ—Ä–µ–º–µ—Å—Ç–∏–ª: –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

## API Endpoints

### POST /api/v1/telegram/register
–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "telegram_chat_id": "string",
  "username": "string"  // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

### GET /api/v1/telegram/status
–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### DELETE /api/v1/telegram/unregister
–û—Ç–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- `httpx` –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (—É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `requirements.txt`)
- –ê–∫—Ç–∏–≤–Ω—ã–π Telegram –±–æ—Ç —Å —Ç–æ–∫–µ–Ω–æ–º
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω (JWT —Ç–æ–∫–µ–Ω)

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ë–æ—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `TELEGRAM_BOT_TOKEN` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `TELEGRAM_BOT_ENABLED=true`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∞–ª –¥–∏–∞–ª–æ–≥ —Å –±–æ—Ç–æ–º –≤ Telegram
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### Chat ID –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `chat_id` (—á–∏—Å–ª–æ, –Ω–µ username)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∞–ª –¥–∏–∞–ª–æ–≥ —Å –±–æ—Ç–æ–º
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ API Telegram

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: `GET /api/v1/telegram/status`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω (`registered: true`)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–∞–¥–∞—á–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (`assigned_to`)
4. –î–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏/–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–æ–∑–¥–∞—Ç–µ–ª—å –∑–∞–¥–∞—á–∏ - –∞–¥–º–∏–Ω/IT

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### JavaScript/TypeScript

```javascript
// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
const registerTelegram = async (chatId, username) => {
  const response = await fetch('/api/v1/telegram/register', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${token}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      telegram_chat_id: chatId,
      username: username
    })
  });
  return response.json();
};

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
const getTelegramStatus = async () => {
  const response = await fetch('/api/v1/telegram/status', {
    headers: {
      'Authorization': `Bearer ${token}`
    }
  });
  return response.json();
};
```

### Python

```python
import requests

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
def register_telegram(token, chat_id, username=None):
    url = "http://localhost:8000/api/v1/telegram/register"
    headers = {
        "Authorization": f"Bearer {token}",
        "Content-Type": "application/json"
    }
    data = {
        "telegram_chat_id": chat_id,
        "username": username
    }
    response = requests.post(url, json=data, headers=headers)
    return response.json()
```
